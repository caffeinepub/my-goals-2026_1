{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 6,
  "summary": "Goals Dashboard is a React + Vite + Tailwind single-page web app for tracking “lifetime goals” across predefined, color-coded category cards. Users can add, inline-edit, delete, and mark goals complete. When a goal is completed, the UI prompts the user to assign it to a month via a month-selection modal; all goal data is persisted locally in browser localStorage. The app also includes a yearly “Time-Bound targets - 2026” summary view that projects completed+scheduled goals into a category-by-month table with UI-only per-goal checkboxes, per-month completion statistics, donut progress visualizations, and an automatic celebration modal when a month reaches 100% completion. The celebration modal supports a default static image (shown when no user photo is selected), confetti/badge overlays, taking a selfie via getUserMedia with live preview, a 5→1 countdown, auto-capture to a File using canvas, optional photo upload, and cleanup of camera/timers/object URLs. The repository additionally contains Internet Identity authentication context and an ICP actor creation hook plus a minimal Motoko canister scaffold, though no backend goal queries are used in this version.",
  "existing_features": [
    {
      "id": "IF-1",
      "title": "App bootstrap with React Query and Internet Identity provider",
      "synonyms": [
        "main.tsx provider setup",
        "QueryClientProvider + InternetIdentityProvider"
      ],
      "description": "Bootstraps the React app by creating a TanStack QueryClient and wrapping the component tree with QueryClientProvider and InternetIdentityProvider; mounts the app and loads global styles.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-2",
      "title": "Goals dashboard as the main application page with internal view toggle",
      "synonyms": [
        "App renders GoalsDashboard",
        "dashboard/summary toggle"
      ],
      "description": "Renders the GoalsDashboard as the primary UI and switches between a dashboard and a summary view using internal component state (no router).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-3",
      "title": "Predefined category cards with emojis, custom colors, and seeded goals",
      "synonyms": [
        "Initial cards",
        "color-coded categories"
      ],
      "description": "Defines initial goal cards (category title + emoji) with per-card OKLCH header/background colors and seeded goal lists.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-4",
      "title": "Local persistence of cards and goals via localStorage",
      "synonyms": [
        "Persist goals on reload",
        "localStorage hydration"
      ],
      "description": "Hydrates cards from localStorage on initial mount (fallback to defaults) and persists updates whenever cards change.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-5",
      "title": "Goal completion toggles with checkbox and month clearing on uncheck",
      "synonyms": [
        "Mark goal complete/incomplete",
        "clear month on uncomplete"
      ],
      "description": "Each goal row includes a checkbox to toggle completion; unchecking a goal clears any month assignment (month: undefined) and marks it incomplete.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-6",
      "title": "Completion-triggered month assignment with pending-goal tracking",
      "synonyms": [
        "Pending goal flow",
        "completion opens month modal"
      ],
      "description": "When a goal transitions from incomplete to complete, the UI records it as a pending goal and opens the month selection modal to schedule it.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-7",
      "title": "Month selection modal (12-month grid) with confirm/cancel actions",
      "synonyms": [
        "MonthSelectionModal",
        "month picker dialog"
      ],
      "description": "Dialog modal prompting for a month assignment with a 3×4 grid of month buttons; Confirm is disabled until a month is selected.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-8",
      "title": "Modal confirm/cancel behavior and close-to-cancel handling",
      "synonyms": [
        "Confirm assigns month",
        "Cancel reverts completion",
        "Close dialog cancels"
      ],
      "description": "Confirm assigns the selected month to the pending goal and closes the modal; canceling/closing reverts the pending goal back to incomplete and resets modal state.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-9",
      "title": "Centered notification overlay with auto-dismiss",
      "synonyms": [
        "CenteredNotification",
        "overlay toast"
      ],
      "description": "Displays a centered overlay notification message and automatically dismisses after a configurable duration (default 3000ms).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-10",
      "title": "Inline editing of goal text with focus and keyboard controls",
      "synonyms": [
        "Click-to-edit goal",
        "in-place rename"
      ],
      "description": "Clicking a goal label enters edit mode with an auto-focused input; saves on blur or Enter (trimmed, non-empty) and cancels on Escape.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-11",
      "title": "Add new goals within a category card with immediate edit",
      "synonyms": [
        "Create goal",
        "plus button adds row"
      ],
      "description": "Allows adding a new goal (default text 'New goal') and immediately enters edit mode for the new item.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-12",
      "title": "Delete goals within a category card",
      "synonyms": [
        "Remove goal",
        "trash icon"
      ],
      "description": "Allows deleting any goal via a per-row action button.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-13",
      "title": "Hover/focus-revealed per-row action buttons and dashed separators",
      "synonyms": [
        "Row actions on hover",
        "dashed dividers"
      ],
      "description": "Reserves space for actions and reveals add/delete buttons on hover or focus-within; renders dashed separators between goal rows (except after the last item).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-14",
      "title": "Single-row card layout with conditional horizontal scrolling",
      "synonyms": [
        "No-wrap cards row",
        "conditional x-scroll"
      ],
      "description": "Displays category cards in a single horizontal row (no wrap) and enables horizontal scrolling when the number of cards exceeds a threshold (cards.length > 7).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-15",
      "title": "Dashboard-to-summary navigation with back navigation",
      "synonyms": [
        "See goals per month",
        "Back to dashboard"
      ],
      "description": "Provides a CTA to switch to the yearly summary view and a back button in the summary header to return to the dashboard.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-16",
      "title": "Yearly summary table organized by category and month with tinted backgrounds",
      "synonyms": [
        "Goals per month table",
        "Time-Bound targets - 2026"
      ],
      "description": "Renders a table with a Category column and 12 month columns, showing completed goals assigned to each month within each category; month headers/cells use distinct light tinted OKLCH backgrounds.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-17",
      "title": "Summary view shows only completed goals that have a month assignment",
      "synonyms": [
        "completed+scheduled filter",
        "month-projected goals"
      ],
      "description": "Projects category→month→goals including only goals where completed is true and month is defined; unscheduled completed goals are omitted from the table.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-18",
      "title": "Yearly summary per-goal checkboxes are interactive but UI-only",
      "synonyms": [
        "Interactive summary checkboxes",
        "non-persistent summary checkbox state"
      ],
      "description": "In the yearly summary view, each listed goal includes an enabled checkbox whose checked state is managed only in the summary component (not persisted).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-19",
      "title": "Statistics section with per-month completion/incompletion percentages",
      "synonyms": [
        "Summary statistics footer",
        "percentage completed"
      ],
      "description": "Computes and displays, per month, the percentage completed (checked/total) and incomplete percentage (100-completed); months with 0 goals show 0%/0% and progress=0.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-20",
      "title": "Monthly progress donut charts in the summary table",
      "synonyms": [
        "Donut chart row",
        "monthly progress visualization"
      ],
      "description": "Renders a donut chart per month column to visualize per-month progress based on checked/total ratio.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-21",
      "title": "Reusable SVG donut chart component",
      "synonyms": [
        "MonthlyProgressDonut",
        "circular progress ring"
      ],
      "description": "Renders a hollow circular progress indicator using SVG circles with configurable size, color, and 0..1 progress input.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-22",
      "title": "Detect month reaching 100% completion and auto-open celebration modal",
      "synonyms": [
        "100% completion trigger",
        "month completion transition detection"
      ],
      "description": "Detects when a month transitions from not complete to complete based on UI-only per-goal checkbox state (requires at least 1 goal) and opens a congratulatory modal.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-23",
      "title": "100% completion celebration modal UI with confetti and badge overlays",
      "synonyms": [
        "MonthlyCompletionCelebrationModal",
        "congratulatory dialog"
      ],
      "description": "Implements a celebration dialog with close (X), confetti overlay, badge overlay, and congratulatory headline/message styling; media area supports selfie preview and optional upload.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-24",
      "title": "Default celebration image shown when no user photo is selected",
      "synonyms": [
        "celebration default placeholder",
        "static default selfie image"
      ],
      "description": "When the celebration modal is open and the user has not captured or uploaded a photo, a static default image from /assets/generated/... is rendered in the media area (instead of an empty placeholder).",
      "reqIds": [
        "REQ-1",
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "IF-25",
      "title": "Celebration modal selfie flow with live front-camera preview",
      "synonyms": [
        "Take Selfie & Share",
        "getUserMedia live preview"
      ],
      "description": "Starts a live front-facing camera preview via getUserMedia and renders a mirrored <video> preview inside the modal when camera mode is active.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-26",
      "title": "Preview readiness gating and in-preview loading overlay",
      "synonyms": [
        "Preparing camera overlay",
        "waitForPreviewReady"
      ],
      "description": "Gates countdown/capture on confirmed preview readiness (dimensions available and playing) and shows a loading overlay while the preview is not yet ready.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-27",
      "title": "Selfie countdown (5→1) overlay with automatic capture",
      "synonyms": [
        "5-second countdown",
        "auto capture"
      ],
      "description": "Displays a 5→1 countdown overlay once the preview is ready and automatically captures after the countdown completes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-28",
      "title": "Selfie capture to File via canvas and preview of captured image",
      "synonyms": [
        "capturePhoto",
        "canvas.toBlob capture"
      ],
      "description": "Captures a still frame from video to a File via canvas.toBlob (mirrors for front camera) and previews the captured image using an object URL.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-29",
      "title": "Upload photo alternative in celebration modal",
      "synonyms": [
        "Upload Photo Instead",
        "file picker preview"
      ],
      "description": "Allows selecting an image from local files via a hidden file input (accept='image/*') and previews it using an object URL.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-30",
      "title": "Camera failure handling with in-modal guidance",
      "synonyms": [
        "camera blocked/unsupported message",
        "permission denied guidance"
      ],
      "description": "If camera is unsupported or fails to start, the modal shows an actionable error message guiding the user to upload a photo instead.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-31",
      "title": "Celebration modal cleanup of camera, timers, and object URLs (blob-only revocation)",
      "synonyms": [
        "stop MediaStream tracks",
        "revokeObjectURL cleanup",
        "timer cleanup"
      ],
      "description": "Stops MediaStream tracks on close/capture, clears countdown timers, resets file input, and revokes only blob: object URLs (does not attempt to revoke static asset URLs).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "IF-32",
      "title": "Reusable camera hook (useCamera) for getUserMedia capture",
      "synonyms": [
        "camera hook",
        "videoRef/canvasRef capture"
      ],
      "description": "Provides a reusable hook to manage camera lifecycle: support detection, start/stop, switch camera, retry, capture frame to File via canvas.toBlob, and cleanup of active streams.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-33",
      "title": "Preview readiness wrapper hook (useCelebrationCamera)",
      "synonyms": [
        "useCamera wrapper",
        "preview-ready tracking"
      ],
      "description": "Wraps the base camera hook to track preview readiness, provides a timeout-based waitForPreviewReady helper, and strengthens stop/capture with stream cleanup and dimension validation.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-34",
      "title": "Shared month constants and Month type",
      "synonyms": [
        "MONTHS constant",
        "Month union type"
      ],
      "description": "Exports a shared MONTHS array (January–December) and a derived Month TypeScript union type for consistent month labeling and typing.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-35",
      "title": "Tailwind/OKLCH design system and custom Lora italic typography utility",
      "synonyms": [
        "theme tokens",
        "font-lora-italic",
        "celebration modal styles"
      ],
      "description": "Defines OKLCH-based CSS variables for light/dark themes, extends Tailwind configuration, and provides custom classes for summary checkboxes, statistics styling, and celebration modal layout/overlays.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-36",
      "title": "Internet Identity authentication context/provider",
      "synonyms": [
        "II auth provider",
        "AuthClient context"
      ],
      "description": "Implements a React Context provider around @dfinity/auth-client to initialize/restore identity, support login via Internet Identity, logout/clear identity, and expose status flags and errors.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-37",
      "title": "Runtime env.json configuration for Internet Identity URL",
      "synonyms": [
        "env.json runtime config",
        "II_URL config"
      ],
      "description": "Provides runtime configuration (env.json) used to supply the Internet Identity provider URL (and related config via the config loader).",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-38",
      "title": "Authenticated/anonymous ICP actor creation hook with React Query caching",
      "synonyms": [
        "useActor hook",
        "actor cached via principal"
      ],
      "description": "Creates and caches an ICP backend actor using React Query; switches between anonymous and authenticated identities based on Internet Identity state and invalidates/refetches other queries when the actor changes.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-39",
      "title": "Backend Motoko canister scaffold",
      "synonyms": [
        "Backend stub",
        "main.mo actor"
      ],
      "description": "Includes a minimal Motoko canister entrypoint defining an empty actor placeholder for future backend logic.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-40",
      "title": "Placeholder queries hook documenting no backend queries",
      "synonyms": [
        "useQueries placeholder",
        "local-only goal state"
      ],
      "description": "Exports an empty module noting that this version manages goal state locally and does not use backend queries for goal data.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "IF-41",
      "title": "Vite configuration for aliasing, environment injection, and ICP dev proxy",
      "synonyms": [
        "vite.config.ts",
        "@ alias",
        "dev proxy"
      ],
      "description": "Configures Vite with React plugin, '@' path alias to src, environment variable injection, and a dev server proxy for '/api' to a local replica; outputs build artifacts to dist.",
      "reqIds": [],
      "version": 1
    },
    {
      "id": "feature-in-the-time-bound-targets-2026-100-completion-congrats-modal-monthlycompletioncelebrationmodal-change-the-default-when-no-user-photo-is-selected-image-shown-in-the-media-area-below-the-text-want-to-celebrate-with-a-selfie-to-the-user-provided-uploaded-image-selfiegirl-jpg-served-as-a-static-asset-from-the-frontend",
      "title": "In the “Time-Bound targets - 2026” 100% completion congrats modal (MonthlyCompletionCelebrationModal), change the default (when no user photo is selected) image shown in the media area below the text “Want to celebrate with a selfie?” to the user-provided uploaded image (selfieGirl.jpg), served as a static asset from the frontend.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-add-the-new-default-image-file-to-the-static-assets-folder-at-frontend-public-assets-generated-and-update-the-default-image-reference-in-frontend-src-components-monthlycompletioncelebrationmodal-tsx-to-use-this-new-filename",
      "title": "Add the new default image file to the static assets folder at frontend/public/assets/generated and update the default-image reference in frontend/src/components/MonthlyCompletionCelebrationModal.tsx to use this new filename.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "In 'Time-Bound targets - 2026' 100% completion congrats modal, show a specific default image directly below the text 'want to celebrate with a selfie?'",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "architectural_notes": [
    "Single-page React UI uses internal view state ('dashboard' | 'summary') rather than a router.",
    "Core domain data (cards → goals) is managed in React component state and persisted via localStorage hydrate-on-mount + save-on-change.",
    "Goal completion uses a controlled “pending goal” flow: checking a goal opens a month picker; confirm assigns month; cancel/close reverts completion.",
    "Yearly summary is a derived projection filtered to (completed && month assigned) using shared MONTHS constants for consistent month labeling/typing.",
    "Summary per-goal checkbox state is intentionally UI-only (local state) and does not mutate persisted goal completion/month data.",
    "100% completion celebration is triggered by detecting false→true transitions for per-month completeness using a previous-completion ref.",
    "Camera/selfie functionality is encapsulated in reusable hooks (useCamera + useCelebrationCamera) exposing refs and lifecycle actions (start/stop/capture) plus preview-readiness gating.",
    "Celebration modal uses static public assets (e.g., /assets/generated/...) for overlays and a default image when no user-captured/uploaded photo is present.",
    "UI is composed using shadcn/ui primitives (Dialog/Button/Input/Checkbox) styled with Tailwind plus OKLCH theme tokens and custom CSS classes.",
    "Internet Identity authentication is implemented as a React Context/provider and ICP actor instantiation is wrapped in a React Query hook keyed by principal."
  ],
  "known_issues": [
    "localStorage hydration uses JSON.parse without schema/version validation; malformed stored data can lead to runtime shape issues.",
    "Completing a goal sets completed=true before month confirmation; a refresh while the month modal is open can leave “completed but unscheduled” goals (month undefined) that the summary omits.",
    "handleMonthConfirm builds the notification message by reading from the pre-update 'cards' closure, which can be stale if state changes before confirm.",
    "handleMonthCancel restores completed=false but does not explicitly clear month; inconsistent stored data could leave an incomplete goal with a month value.",
    "Yearly summary 100% detection checks all months; if multiple months reach 100% on a single change, the modal will effectively celebrate the last processed month.",
    "YearlySummaryTable’s completion-detection effect depends only on checkedState (not cards); changes to cards while viewing summary can desync transition detection.",
    "MonthlyCompletionCelebrationModal types countdownTimerRef as NodeJS.Timeout; some TS DOM setups can conflict with browser timeout typings.",
    "Uploading a photo while camera mode is active does not stop the camera or exit camera mode, so the uploaded image may not become visible until the camera is stopped/closed.",
    "useCelebrationCamera.waitForPreviewReady uses a timeout-based event cleanup that is not explicitly cancelled on early resolve (minor event-listener lifecycle risk).",
    "Duplicate global CSS entrypoints exist (frontend/index.css and frontend/src/index.css); only src/index.css is imported, but duplication adds maintenance ambiguity."
  ],
  "isFixRequest": false,
  "imageRequirements": "## Required Images\n- Portrait selfie photo of a smiling woman with soft sparkle/bokeh overlay and large beige outlined text reading “I crushed my monthly goals!” near the bottom (celebration-default-selfieGirl.dim_696x609.png)",
  "generatedImages": [
    {
      "filename": "celebration-default-selfieGirl.dim_696x609.png",
      "description": "Portrait selfie photo of a smiling woman with soft sparkle/bokeh overlay and large beige outlined text reading “I crushed my monthly goals!” near the bottom",
      "targetWidth": 696,
      "targetHeight": 609
    }
  ],
  "gameProjectType": "none",
  "projectName": "Goals Dashboard",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}